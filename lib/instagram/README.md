## Configuration ##

**config/instagram/access\_token.yml**
This is the configuration file that contains the data about the access\_token that is pulled from the instagram:authorize rake task. It stores the username, user\_id and access\_token. This file does not need to be edited in any way as the rake task will automatically populate it. It will also overwrite the data if we have to re-authorize.

**config/instagram/whitelist.yml**
This is the configuration file that contains the list of users and tags to pull. It pulls the users, then filters the appropriately tagged photos. This file can be edited to allow photos from more users and/or tags.

## Constants ##

**INSTAGRAM\_AUTH\_KEY**
32 character key generated by us that is static. This is passed through the Instagram request and comes back to us when we go to exchange for an access token. This is just to make sure our request is authentic. Just a small precaution. This implementation is not required, but if this key is removed or changes length, the verification method (InstagramController#authorize) must be altered. No need to change this ever, really.

**INSTAGRAM\_AUTH\_URL**
This is the same as the Redirect URI you set in the Instagram app that our user will connect with. This value must match the one set in the Instagram account's backend minus the ?authkey=INSTAGRAM\_AUTH\_KEY

** I suggest we turn these into environment variables to keep them out of the source code. I don't believe this repo will be public, but still always a good idea :) All and any constants or settings that need to be changed are adjusted are in config/initializers/instagram.rb*


## Rake Tasks ##

**instagram:authorize**
This is used to do the initial authorization of an Instagram account. When this is ran, it will use the email set in the environment variable (INSTAGRAM\_EMAIL) passed to it to send the authorization email that has a generated link from Instagram. This is the link used to connect your Instagram account. The connection to the Instagram is required since we are trying to pull images from private users. This was also needed because we had to go through the user to get the photos as there are thousands to hundreds of thousands of photos tagged #s6.

    rake instagram:authorize INSTAGRAM_EMAIL=example@spark6.com

**instagram:get\_photos**
This is used to pull the photos from Instagram. We should set this to a cronjob to run every so often as it is what pulls the photos to be display on the site. When this is ran it does three things. First, it pulls all the data for the photos from Instagram (Data collected for each photo: instagram\_id, username, full\_name, link, tags, caption, low\_resolution\_url, standard\_resolution\_url, thumbnail\_url, created\_time). Second, it stores this data in the database. The third thing is triggered by the second. On creation of each database entry it will go to each of the three urls and download the image file to the local file system on the server. This allows us to use these files to display our photos on the about page rather than relying on Instagram. Relying on Instagram could cause issues if our server ever experiences slow response times with Instagram.

    rake instagram:get_photos
